function completely(e,a){(a=a||{}).fontSize=a.fontSize||"16px",a.fontFamily=a.fontFamily||"sans-serif",a.promptInnerHTML=a.promptInnerHTML||"",a.color=a.color||"#333",a.hintColor=a.hintColor||"#aaa",a.backgroundColor=a.backgroundColor||"#fff",a.dropDownBorderColor=a.dropDownBorderColor||"#aaa",a.dropDownZIndex=a.dropDownZIndex||"100",a.dropDownOnHoverBackgroundColor=a.dropDownOnHoverBackgroundColor||"#ddd";var d=document.createElement("input"),s=(d.type="text",d.spellcheck=!1,d.style.fontSize=a.fontSize,d.style.fontFamily=a.fontFamily,d.style.color=a.color,d.style.backgroundColor=a.backgroundColor,d.style.width="100%",d.style.outline="0",d.style.border="0",d.style.margin="0",d.style.padding="0",d.cloneNode()),t=(s.disabled="",s.style.position="absolute",s.style.top="0",s.style.left="0",s.style.borderColor="transparent",s.style.boxShadow="none",s.style.color=a.hintColor,d.style.backgroundColor="transparent",d.style.verticalAlign="top",d.style.position="relative",document.createElement("div")),o=(t.style.position="relative",t.style.outline="0",t.style.border="0",t.style.margin="0",t.style.padding="0",document.createElement("div"));if(o.style.position="absolute",o.style.outline="0",o.style.margin="0",o.style.padding="0",o.style.border="0",o.style.fontSize=a.fontSize,o.style.fontFamily=a.fontFamily,o.style.color=a.color,o.style.backgroundColor=a.backgroundColor,o.style.top="0",o.style.left="0",o.style.overflow="hidden",o.innerHTML=a.promptInnerHTML,o.style.background="transparent",void 0===document.body)throw"document.body is undefined. The library was wired up incorrectly.";document.body.appendChild(o);var u,y,p,n,c,v,h,l=o.getBoundingClientRect().right,g=(t.appendChild(o),o.style.visibility="visible",o.style.left="-"+l+"px",t.style.marginLeft=l+"px",t.appendChild(s),t.appendChild(d),document.createElement("div")),u=(g.style.position="absolute",g.style.visibility="hidden",g.style.outline="0",g.style.margin="0",g.style.padding="0",g.style.textAlign="left",g.style.fontSize=a.fontSize,g.style.fontFamily=a.fontFamily,g.style.backgroundColor=a.backgroundColor,g.style.zIndex=a.dropDownZIndex,g.style.cursor="default",g.style.borderStyle="solid",g.style.borderWidth="1px",g.style.borderColor=a.dropDownBorderColor,g.style.overflowX="hidden",g.style.whiteSpace="pre",g.style.overflowY="scroll",g),y=[],p=0,n=-1,f=c={hide:function(){u.style.visibility="hidden"},refresh:function(e,t){u.style.visibility="hidden",p=0,u.innerHTML="";var o=window.innerHeight||document.documentElement.clientHeight,n=(l=u.parentNode.getBoundingClientRect()).top-6,l=o-l.bottom-6;y=[];for(var i,r=0;r<t.length;r++)0===t[r].indexOf(e)&&((i=document.createElement("div")).style.color=a.color,i.onmouseover=m,i.onmouseout=b,i.onmousedown=C,i.__hint=t[r],i.innerHTML=e+"<b>"+t[r].substring(e.length)+"</b>",y.push(i),u.appendChild(i));0===y.length||1===y.length&&e===y[0].__hint||y.length<2||(c.highlight(0),3*l<n?(u.style.maxHeight=n+"px",u.style.top="",u.style.bottom="100%"):(u.style.top="100%",u.style.bottom="",u.style.maxHeight=l+"px"),u.style.visibility="visible")},highlight:function(e){-1!=n&&y[n]&&(y[n].style.backgroundColor=a.backgroundColor),y[e].style.backgroundColor=a.dropDownOnHoverBackgroundColor,n=e},move:function(e){return"hidden"===u.style.visibility?"":(p+e!==-1&&p+e!==y.length&&(p+=e,c.highlight(p)),y[p].__hint)},onmouseselection:function(){}};function m(){this.style.outline="1px solid #ddd"}function b(){this.style.outline="0"}function C(){c.hide(),c.onmouseselection(this.__hint)}f.onmouseselection=function(e){d.value=s.value=h+e,k.onChange(d.value),i=d.value,setTimeout(function(){d.focus()},0)},t.appendChild(g),e.appendChild(t);var i,r,w,k={onArrowDown:function(){},onArrowUp:function(){},onEnter:function(){},onTab:function(){},onChange:function(){k.repaint()},startFrom:0,options:[],wrapper:t,input:d,hint:s,dropDown:g,prompt:o,setText:function(e){s.value=e,d.value=e},getText:function(){return d.value},hideDropDown:function(){f.hide()},repaint:function(){var e=d.value,t=k.startFrom,o=k.options,n=o.length,l=e.substring(t);h=e.substring(0,t),s.value="";for(var i=0;i<n;i++){var r=o[i];if(0===r.indexOf(l)){s.value=h+r;break}}g.style.left=(t=h,void 0===v&&((v=document.createElement("span")).style.visibility="hidden",v.style.position="fixed",v.style.outline="0",v.style.margin="0",v.style.padding="0",v.style.border="0",v.style.left="0",v.style.whiteSpace="pre",v.style.fontSize=a.fontSize,v.style.fontFamily=a.fontFamily,v.style.fontWeight="normal",document.body.appendChild(v)),v.innerHTML=String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),v.getBoundingClientRect().right+"px"),f.refresh(l,k.options)}};function x(){var e=r.value;i!==e&&w(i=e)}return w=function(e){k.onChange(e)},i=(r=d).value,r.addEventListener?(r.addEventListener("input",x,!1),r.addEventListener("keyup",x,!1),r.addEventListener("change",x,!1)):(r.attachEvent("oninput",x),r.attachEvent("onkeyup",x),r.attachEvent("onchange",x)),o=function(e){var t,o,n=(e=e||window.event).keyCode;if(33!=n&&34!=n)if(27==n)f.hide(),s.value=d.value,d.focus();else{if(39!=n&&35!=n&&9!=n)return 13!=n?40==n?(""==(t=f.move(1))&&k.onArrowDown(),void(s.value=h+t)):38==n?(""==(t=f.move(-1))&&k.onArrowUp(),s.value=h+t,e.preventDefault(),void e.stopPropagation()):void(s.value=""):void(0==s.value.length?k.onEnter():(e="hidden"==g.style.visibility,f.hide(),e?(s.value=d.value,d.focus(),k.onEnter()):(d.value=s.value,o=i!=d.value,i=d.value,o&&k.onChange(d.value))));9==n&&(e.preventDefault(),e.stopPropagation(),0==s.value.length&&k.onTab()),0<s.value.length&&(f.hide(),d.value=s.value,o=i!=d.value,i=d.value,o&&k.onChange(d.value))}},d.addEventListener?d.addEventListener("keydown",o,!1):d.attachEvent("onkeydown",o),k}
function completely(e,a){(a=a||{}).fontSize=a.fontSize||"16px",a.fontFamily=a.fontFamily||"sans-serif",a.promptInnerHTML=a.promptInnerHTML||"",a.color=a.color||"#333",a.hintColor=a.hintColor||"#aaa",a.backgroundColor=a.backgroundColor||"#fff",a.dropDownBorderColor=a.dropDownBorderColor||"#aaa",a.dropDownZIndex=a.dropDownZIndex||"100",a.dropDownOnHoverBackgroundColor=a.dropDownOnHoverBackgroundColor||"#ddd";var d=document.createElement("input");d.type="text",d.spellcheck=!1,d.style.fontSize=a.fontSize,d.style.fontFamily=a.fontFamily,d.style.color=a.color,d.style.backgroundColor=a.backgroundColor,d.style.width="100%",d.style.outline="0",d.style.border="0",d.style.margin="0",d.style.padding="0";var s=d.cloneNode();s.disabled="",s.style.position="absolute",s.style.top="0",s.style.left="0",s.style.borderColor="transparent",s.style.boxShadow="none",s.style.color=a.hintColor,d.style.backgroundColor="transparent",d.style.verticalAlign="top",d.style.position="relative";var t=document.createElement("div");t.style.position="relative",t.style.outline="0",t.style.border="0",t.style.margin="0",t.style.padding="0";var o=document.createElement("div");if(o.style.position="absolute",o.style.outline="0",o.style.margin="0",o.style.padding="0",o.style.border="0",o.style.fontSize=a.fontSize,o.style.fontFamily=a.fontFamily,o.style.color=a.color,o.style.backgroundColor=a.backgroundColor,o.style.top="0",o.style.left="0",o.style.overflow="hidden",o.innerHTML=a.promptInnerHTML,o.style.background="transparent",void 0===document.body)throw"document.body is undefined. The library was wired up incorrectly.";document.body.appendChild(o);var n=o.getBoundingClientRect().right;t.appendChild(o),o.style.visibility="visible",o.style.left="-"+n+"px",t.style.marginLeft=n+"px",t.appendChild(s),t.appendChild(d);var u=document.createElement("div");u.style.position="absolute",u.style.visibility="hidden",u.style.outline="0",u.style.margin="0",u.style.padding="0",u.style.textAlign="left",u.style.fontSize=a.fontSize,u.style.fontFamily=a.fontFamily,u.style.backgroundColor=a.backgroundColor,u.style.zIndex=a.dropDownZIndex,u.style.cursor="default",u.style.borderStyle="solid",u.style.borderWidth="1px",u.style.borderColor=a.dropDownBorderColor,u.style.overflowX="hidden",u.style.whiteSpace="pre",u.style.overflowY="scroll";var y,p,c,l,v,h,f,g=(y=u,p=[],c=0,l=-1,v={hide:function(){y.style.visibility="hidden"},refresh:function(e,t){y.style.visibility="hidden",c=0,y.innerHTML="";var o=window.innerHeight||document.documentElement.clientHeight,n=(l=y.parentNode.getBoundingClientRect()).top-6,l=o-l.bottom-6;p=[];for(var i,r=0;r<t.length;r++)0===t[r].indexOf(e)&&((i=document.createElement("div")).style.color=a.color,i.onmouseover=m,i.onmouseout=b,i.onmousedown=C,i.__hint=t[r],i.innerHTML=e+"<b>"+t[r].substring(e.length)+"</b>",p.push(i),y.appendChild(i));0!==p.length&&(1===p.length&&e===p[0].__hint||p.length<2||(v.highlight(0),3*l<n?(y.style.maxHeight=n+"px",y.style.top="",y.style.bottom="100%"):(y.style.top="100%",y.style.bottom="",y.style.maxHeight=l+"px"),y.style.visibility="visible"))},highlight:function(e){-1!=l&&p[l]&&(p[l].style.backgroundColor=a.backgroundColor),p[e].style.backgroundColor=a.dropDownOnHoverBackgroundColor,l=e},move:function(e){return"hidden"===y.style.visibility?"":(c+e===-1||c+e===p.length||(c+=e,v.highlight(c)),p[c].__hint)},onmouseselection:function(){}});function m(){this.style.outline="1px solid #ddd"}function b(){this.style.outline="0"}function C(){v.hide(),v.onmouseselection(this.__hint)}g.onmouseselection=function(e){d.value=s.value=f+e,k.onChange(d.value),i=d.value,setTimeout(function(){d.focus()},0)},t.appendChild(u),e.appendChild(t);var i,r,w,k={onArrowDown:function(){},onArrowUp:function(){},onEnter:function(){},onTab:function(){},onChange:function(){k.repaint()},startFrom:0,options:[],wrapper:t,input:d,hint:s,dropDown:u,prompt:o,setText:function(e){s.value=e,d.value=e},getText:function(){return d.value},hideDropDown:function(){g.hide()},repaint:function(){var e=d.value,t=k.startFrom,o=k.options,n=o.length,l=e.substring(t);f=e.substring(0,t),s.value="";for(var i=0;i<n;i++){var r=o[i];if(0===r.indexOf(l)){s.value=f+r;break}}u.style.left=(t=f,void 0===h&&((h=document.createElement("span")).style.visibility="hidden",h.style.position="fixed",h.style.outline="0",h.style.margin="0",h.style.padding="0",h.style.border="0",h.style.left="0",h.style.whiteSpace="pre",h.style.fontSize=a.fontSize,h.style.fontFamily=a.fontFamily,h.style.fontWeight="normal",document.body.appendChild(h)),h.innerHTML=String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),h.getBoundingClientRect().right+"px"),g.refresh(l,k.options)}};function x(){var e=r.value;i!==e&&w(i=e)}return w=function(e){k.onChange(e)},i=(r=d).value,r.addEventListener?(r.addEventListener("input",x,!1),r.addEventListener("keyup",x,!1),r.addEventListener("change",x,!1)):(r.attachEvent("oninput",x),r.attachEvent("onkeyup",x),r.attachEvent("onchange",x)),o=function(e){var t,o=(e=e||window.event).keyCode;if(33!=o&&34!=o){if(27==o)return g.hide(),s.value=d.value,void d.focus();if(39==o||35==o||9==o)return 9==o&&(e.preventDefault(),e.stopPropagation(),0==s.value.length&&k.onTab()),void(0<s.value.length&&(g.hide(),d.value=s.value,n=i!=d.value,i=d.value,n&&k.onChange(d.value)));if(13!=o)return 40==o?(""==(t=g.move(1))&&k.onArrowDown(),void(s.value=f+t)):38==o?(""==(t=g.move(-1))&&k.onArrowUp(),s.value=f+t,e.preventDefault(),void e.stopPropagation()):void(s.value="");if(0==s.value.length)k.onEnter();else{if(e="hidden"==u.style.visibility,g.hide(),e)return s.value=d.value,d.focus(),void k.onEnter();d.value=s.value;var n=i!=d.value;i=d.value,n&&k.onChange(d.value)}}},d.addEventListener?d.addEventListener("keydown",o,!1):d.attachEvent("onkeydown",o),k}
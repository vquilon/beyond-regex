var RegexVisualizer=function(n){var a,r,o,i=document.querySelector(`#${n.loader_view_id}`),d=i.querySelector(`.${n.progress_bar_class}`),l=new Raphael("graphCtView",10,10);function c(e,t){n.debug&&(e.innerHTML="",window.setTimeout(()=>JsonView.renderJSON(t,e),50))}function t(){var t=u(m.value);return t?(g.disabled=!0,i.classList.add("loading"),d.updateProgressBar=function(e){this.attributes.getNamedItem("data-value").value=`${e}`,this.style.transform=`scaleX(${e/100})`},window.setTimeout(function(){var e=visualize(t,s(),l,d);c(document.querySelector(`#${n.raphaelJSONId}`),e),o&&o(),[a,r,o]=CustomThumbnailSVGControl({mainViewId:"graphCtView",mainSVGId:"graphCtSVG",thumbContainerId:"thumbViewContainer"})},100),window.setTimeout(function(){i.classList.remove("loading"),d.attributes.getNamedItem("data-value").value="0",d.style.transform="",g.disabled=!1},200),1):(g.disabled=!0,0)}function u(e){v();var t=null;try{var n=parse(),t=n(e,null,document.querySelector("[name='languageRegex']:checked").value)}catch(t){if(!(t instanceof n.RegexSyntaxError))throw t;b(e,t)}return t&&y(t),t}function s(){for(var e="",t=0,n=f.length;t<n;t++)f[t].checked&&(e+=f[t].value);return e}l.canvas.id="graphCtSVG";var m=document.getElementById("input"),g=(document.getElementById("inputCt"),document.getElementById("visualizeClick")),h=document.getElementById("embedIt"),p=document.getElementById("errorBox"),f=document.getElementsByName("flag"),v=(document.getElementById("flagBox"),function(){p.style.display="none"}),b=function(e,t){p.style.display="block";var n=["Error:"+t.message,""];"number"==typeof t.lastIndex&&(n.push(e),n.push(Kit().repeats("-",t.lastIndex)+"^")),function(e,t){e.innerHTML="";var n=document.createTextNode("");n.nodeValue=t,e.appendChild(n)}(p,n.join("\n"))},y=function(e){e={raw:e.raw.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),groupCount:e.groupCount,tree:e.tree},c(document.querySelector(`#${n.regexSONId}`),e)};m.addEventListener("input",function(e){window.hasChanges=!0,g.disabled=!1}),g.addEventListener("click",function(e){e.detail&&1!=e.detail||t()});var e,w=(!(e=location.hash)||e.length<2?e={embed:!1,re:"",highlight:!0,flags:""}:((e=(e=e.slice(2)).split("&").reduce(function(e,t){return e[(t=t.split("="))[0]]=t[1],e},{})).embed="true"===e.embed,e.flags=e.flags||"",e.re=e.re?I(decodeURIComponent(e.re)):""),e);function I(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}function C(){return I(m.value)}!w.embed&&"export"!=w.cmd||(document.body.className+=" embed"),!w.embed&&"export"!==w.cmd||(document.getElementById("embedFooterLink").href=`${document.location.origin}${document.location.pathname}`+location.hash.replace(/\bembed=true\b/gi,"").replace(/\bcmd=export\b/gi,"")),w.flags&&function(e){for(var t=0,n=e.length;t<n;t++)~e.indexOf(f[t].value)?f[t].checked=!0:f[t].checked=!1}(w.flags),w.re&&(e=w.re,m.value=I(e)),"export"!=w.cmd?(function(){h.addEventListener("click",function(){if(!u(m.value))return!1;var e,t,n,a=(r=location.href).indexOf("#"),r=0<a?r.slice(0,a):r;location.hash=(e=w,t=C(),n=s(),"#!"+(e.debug?"debug=true&":"")+(e.cmd?"cmd="+e.cmd+"&":"")+(e.embed?"embed=true&":"")+"flags="+n+"&re="+encodeURIComponent(e.re=t)),a=C(),a='<iframe frameborder="0" width="'+Math.ceil(l.width)+'" height="'+Math.ceil(l.height)+'" src="'+r+"#!embed=true&flags="+s()+"&re="+encodeURIComponent(a)+'"></iframe>',window.prompt("Copy the html code:",a)});let e=document.querySelectorAll("[name='languageRegex']");for(var t=0,n=e.length;t<n;t++)e[t].onclick=function(){i.classList.contains("loading")||g.disabled&&(g.disabled=!1)}}(),t()):function(){var e=window.devicePixelRatio||1;svg=l.getElementsByTagName("svg")[0];var t,n=svg.clientWidth||parseInt(getComputedStyle(svg).width),a=svg.clientHeight||parseInt(getComputedStyle(svg).height),r=new Image;r.width=n,r.height=a,r.setAttribute("src",(t=svg,t=(new XMLSerializer).serializeToString(t),"data:image/svg+xml,"+encodeURIComponent(t)));var o=document.createElement("canvas");o.width=n*e,o.height=a*e,o.style.width=n+"px",o.style.height=a+"px",o.className="exportCanvas";var i=o.getContext("2d");i.setTransform(e,0,0,e,0,0),r.onload=function(){i.drawImage(r,0,0),l.style.display="none",document.body.appendChild(o)}}()};
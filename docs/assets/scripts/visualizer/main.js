var RegexVisualizer=function(e){var t,n,a,d=new Raphael("graphCtView",10,10);function r(e,t){e.innerHTML="";var n=document.createTextNode("");return n.nodeValue=t,e.appendChild(n),t}function i(){var e=l.value;return(e=o(e))&&(t&&n&&a&&(a(),a=void 0),visualize(e,v(),d),[t,n,a]=ThumbnailSVGControl({mainViewId:"graphCtView",mainSVGId:"graphCtSVG",thumbContainerId:"thumbViewContainer"}),1)}d.canvas.id="graphCtSVG";function o(e){h();var t=null;try{var n=parse(),t=n(e,null,document.querySelector("[name='languageRegex']:checked").value)}catch(t){if(!(t instanceof n.RegexSyntaxError))throw t;p(e,t)}return t&&f(t),t}var l=document.getElementById("input"),c=(document.getElementById("inputCt"),document.getElementById("visualizeClick")),u=document.getElementById("embedIt"),m=document.getElementById("errorBox"),g=document.getElementsByName("flag"),s=document.getElementById("flagBox"),h=function(){m.style.display="none"},p=function(e,t){m.style.display="block";var n=["Error:"+t.message,""];"number"==typeof t.lastIndex&&(n.push(e),n.push(Kit().repeats("-",t.lastIndex)+"^")),r(m,n.join("\n"))},v=function(){for(var e="",t=0,n=g.length;t<n;t++)g[t].checked&&(e+=g[t].value);return e},f=function(e){e={raw:e.raw.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),groupCount:e.groupCount,tree:e.tree};const t=document.querySelector("#treeRegex");t.innerHTML="",JsonView.renderJSON(e,t)};l.addEventListener("change",function(e){window.hasChanges=!0}),c.addEventListener("click",function(e){e.detail&&1!=e.detail||(this.disabled=!0,i(),this.disabled=!1)});var b=(!(c=location.hash)||c.length<2?c={embed:!1,re:"",highlight:!0,flags:""}:((c=(c=c.slice(2)).split("&").reduce(function(e,t){return e[(t=t.split("="))[0]]=t[1],e},{})).embed="true"===c.embed,c.flags=c.flags||"",c.re=c.re?y(decodeURIComponent(c.re)):""),c);function y(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}function w(){return y(l.value)}!b.embed&&"export"!=b.cmd||(document.body.className+=" embed"),!b.embed&&"export"!==b.cmd||(document.getElementById("embedFooterLink").href=`${document.location.origin}${document.location.pathname}`+location.hash.replace(/\bembed=true\b/gi,"").replace(/\bcmd=export\b/gi,"")),b.flags&&function(e){for(var t=0,n=e.length;t<n;t++)~e.indexOf(g[t].value)?g[t].checked=!0:g[t].checked=!1;r(s,e)}(b.flags),b.re&&(c=b.re,l.value=y(c)),"export"!=b.cmd?(u.addEventListener("click",function(){if(!o(l.value))return!1;var e,t,n,a=(r=location.href).indexOf("#"),r=0<a?r.slice(0,a):r;location.hash=(e=b,t=w(),n=v(),"#!"+(e.debug?"debug=true&":"")+(e.cmd?"cmd="+e.cmd+"&":"")+(e.embed?"embed=true&":"")+"flags="+n+"&re="+encodeURIComponent(e.re=t)),a=w(),a='<iframe frameborder="0" width="'+Math.ceil(d.width)+'" height="'+Math.ceil(d.height)+'" src="'+r+"#!embed=true&flags="+v()+"&re="+encodeURIComponent(a)+'"></iframe>',window.prompt("Copy the html code:",a)}),i()):function(){var e=window.devicePixelRatio||1;svg=d.getElementsByTagName("svg")[0];var t,n=svg.clientWidth||parseInt(getComputedStyle(svg).width),a=svg.clientHeight||parseInt(getComputedStyle(svg).height),r=new Image;r.width=n,r.height=a,r.setAttribute("src",(t=svg,t=(new XMLSerializer).serializeToString(t),"data:image/svg+xml,"+encodeURIComponent(t)));var i=document.createElement("canvas");i.width=n*e,i.height=a*e,i.style.width=n+"px",i.style.height=a+"px",i.className="exportCanvas";var o=i.getContext("2d");o.setTransform(e,0,0,e,0,0),r.onload=function(){o.drawImage(r,0,0),d.style.display="none",document.body.appendChild(i)}}()};
var RegexVisualizerPanel=function(e){var a=document.getElementById("input"),i=(document.getElementById("terminal-error .errorBox"),document.getElementById("visualizeClick")),t=document.getElementById("exportIt"),r=!a&&!i,o=r?e.editorParser.parseSharedRegex:e.editorParser.parseRegex;e.editorParser.trim;const s=e.editorParser.getCorrectedReLanguage,l=e.editorParser.getCorrectedFlags,n=e.editorParser.getCorrectedRegex,c=e.editorParser._updateRaphaelItemsJSON;var d,u,m,g=document.querySelector(`#${e.loader_view_id}`),p=g.querySelector(`.${e.progress_bar_class}`),v=new Raphael("visualizer-graphView",10,10);v.canvas.id="visualizer-graphSVG";const h=()=>{var e,t=a.value,r=o(t);return r?(i.disabled=!0,g.classList.add("loading"),p.updateProgressBar=function(e){this.attributes.getNamedItem("data-value").value=`${e}`,this.style.transform=`scaleX(${e/100})`},window.setTimeout(()=>{e=RegexVisualizer(r,l(),v,p),c(e),m&&m(),[d,u,m]=CustomThumbnailSVGControl({mainViewId:"visualizer-graphView",mainSVGId:"visualizer-graphSVG",thumbContainerId:"thumbViewContainer"}),g.classList.remove("loading"),p.attributes.getNamedItem("data-value").value="0",p.style.transform="",i.disabled=!1},0),!0):!(i.disabled=!0)};function f(){var e=n(),t=l(),r=s();let a=location.href;var i=a.indexOf("#");return a=0<i?a.slice(0,i):a,a=`${a}panels/visualizer`,`<iframe frameborder="0" 
            width="500px" height="300px" 
            src="${a}#!embed=true&flags=${t}&re=${encodeURIComponent(e)}&reLang=${r}">
            </iframe>`}function y(e){return(new XMLSerializer).serializeToString(e)}const w=async(c,d,u,e="svg")=>{let m=v.canvas.cloneNode(!0),t=m.querySelector("g#mainSVGViewPort");t.removeAttribute("transform"),t.removeAttribute("style");let r=t.querySelector("g#mainSVGContainer");r.removeChild(r.querySelector("desc")),r.removeChild(r.querySelector("defs"));let a=r.firstElementChild;a.style.stroke="none",a.style.strokeWidth="";var i=(e,o,t="",r="",s="")=>{e.style.fill=t||e.style.fill||e.getAttribute("fill"),e.style.stroke=r||e.style.stroke||e.getAttribute("stroke"),e.style.strokeWidth=s||e.style.strokeWidth||e.getAttribute("stroke-width"),s=window.devicePixelRatio||1;let l=parseFloat(e.getAttribute("width")),n=parseFloat(e.getAttribute("height"));if(m.removeAttribute("xmlns:xlink"),"svg"===o&&(e=`data:image/svg+xml,${encodeURIComponent(y(m))}`,d.setAttribute("src",e),u.setAttribute("href",e)),"png"===o){o=m.outerHTML,c.width=l*s,c.height=n*s;let t=c.getContext("2d");t.setTransform(s,0,0,s,0,0),y(m);let r=self.URL||self.webkitURL||self,a=new Image;o=new Blob([o],{type:"image/svg+xml;charset=utf-8"});let i=r.createObjectURL(o);a.onload=function(){t.drawImage(a,0,0,l,n);var e=c.toDataURL("image/png");r.revokeObjectURL(i),d.setAttribute("src",e),u.setAttribute("href",e)},a.src=i}};return i(a,e),{$img:d,rectBackground:a,updateBackgroundStyle:i}};return document.querySelector("#share-visualize").addEventListener("click",e=>{const t=new Promise(e=>{e({panelURL:f()})});t.then(e=>{Swal.fire({title:"Share the interactive graph!",icon:"info",iconHtml:'<span class="sweetalert-icon material-icons">image</span>',html:`
                <div id="visualizer-iframe-copy" class="container-copy">
                    <div class="iframe-copier">
                        <div class="iframe-content">
                            <span>${e.panelURL.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</span>
                        </div>
                        <div class="wrap-copy-iframe"><button class="copy-iframe"><i class="far fa-copy"></i></button></div>
                    </div>
                </div>
                <canvas style="display:none; width: 100%; height: unset;" id="export-image"></canvas>
                
                <a class="anchor-export-img" href="" download="graph-regex.svg"><img id="exported-img" src=""><span><i class="fas fa-download"></i>SVG</span></a>
                `,showCancelButton:!0,showConfirmButton:!1,showCloseButton:!0,cancelButtonText:"Close",didOpen:()=>{Swal.showLoading(),document.querySelector("#visualizer-iframe-copy button.copy-iframe").addEventListener("click",function(){navigator.clipboard.writeText(e.panelURL),document.querySelector("#visualizer-iframe-copy .copy-iframe>i").className="fas fa-check",document.querySelector("#visualizer-iframe-copy .iframe-copier").classList.add("copied"),setTimeout(function(){var e=document.querySelector("#visualizer-iframe-copy .copy-iframe>i");let t=document.querySelector("#visualizer-iframe-copy .iframe-copier");e&&t&&t.classList.remove("copied")},1e3)});var{}=w(document.querySelector("canvas#export-image"),document.querySelector("img#exported-img"),document.querySelector("img#exported-img").parentElement,imageType="svg");Swal.hideLoading()}})})}),document.querySelector("#full-screen").addEventListener("click",e=>{let t=document.querySelector("#visualizer-graph");t.classList.toggle("full-screen"),t.classList.contains("full-screen")?document.querySelector("#full-screen").textContent="close_fullscreen":document.querySelector("#full-screen").textContent="open_in_full"}),document.querySelector("#visualizer-graph .control-panel .hide-button").addEventListener("click",e=>{document.querySelector("#visualizer-graph").classList.toggle("hide-control")}),r?(()=>{var e=n();if(e=o(e,language_selected=s()))g.classList.add("loading"),p.updateProgressBar=function(e){this.attributes.getNamedItem("data-value").value=`${e}`,this.style.transform=`scaleX(${e/100})`},RegexVisualizer(e,l(),v,p),[d,u,m]=CustomThumbnailSVGControl({mainViewId:"visualizer-graphView",mainSVGId:"visualizer-graphSVG",thumbContainerId:"thumbViewContainer"}),g.classList.remove("loading"),p.attributes.getNamedItem("data-value").value="0",p.style.transform=""})():(i.addEventListener("click",e=>{e.detail&&1!=e.detail||h()}),t.addEventListener("click",e=>{Swal.fire({title:"Share the Image Graph (PNG)!",icon:"info",iconHtml:'<span class="sweetalert-icon material-icons">image</span>',html:`
                <canvas style="display:none; width: 100%; height: unset;" id="export-image"></canvas>
                
                <a class="anchor-export-img" href="" download="graph-regex.png"><img id="exported-img" src=""><span><i class="fas fa-download"></i>PNG</span></a>
                `,showCancelButton:!0,showConfirmButton:!1,showCloseButton:!0,cancelButtonText:"Close",didOpen:()=>{Swal.showLoading();var{}=w(document.querySelector("canvas#export-image"),document.querySelector("img#exported-img"),document.querySelector("img#exported-img").parentElement,imageType="png");Swal.hideLoading()}})}),h()),{generatePanelURL:f}};
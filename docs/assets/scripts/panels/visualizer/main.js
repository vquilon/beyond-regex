var RegexVisualizerPanel=function(e){var r,i,o=document.getElementById("input"),s=document.getElementById("visualizeClick"),t=document.getElementById("exportIt");const n=!o&&!s;i=n?(r=e.editorParser.getParams(),e.editorParser.parseSharedRegex):e.editorParser.parseRegex;e.editorParser.trim;const l=e.editorParser.getReLanguage,c=e.editorParser.getFlags;e.editorParser.setFlags;const d=e.editorParser.getInputValue,u=e.editorParser._updateRaphaelItemsJSON;var m,g,p,h=document.querySelector(`#${e.loader_view_id}`),v=h.querySelector(`.${e.progress_bar_class}`),f=new Raphael("visualizer-graphView",10,10);f.canvas.id="visualizer-graphSVG";const a=()=>{var e=o.value,t=i(e);if(t){s.disabled=!0,h.classList.add("loading");v.updateProgressBar=function(e){this.attributes.getNamedItem("data-value").value=`${e}`,this.style.transform=`scaleX(${e/100})`};var a;return window.setTimeout(()=>{a=RegexVisualizer(t,c(),f,v),u(a),p&&p(),[m,g,p]=CustomThumbnailSVGControl({mainViewId:"visualizer-graphView",mainSVGId:"visualizer-graphSVG",thumbContainerId:"thumbViewContainer"}),h.classList.remove("loading"),v.attributes.getNamedItem("data-value").value="0",v.style.transform="",s.disabled=!1},0),!0}return!(s.disabled=!0)};function y(){let e="",t="",a="";return a=n?(e=r.re,t=r.flags,r.reLang):(e=d(),t=c(),l()),`<iframe frameborder="0" 
            width="500px" height="300px" 
            src="${`${location.href}/panels/visualizer`}#!embed=true&flags=${t}&re=${encodeURIComponent(e)}&reLang=${a}">
            </iframe>`}const w=async(o,s,n,e="svg")=>{let l=f.canvas.cloneNode(!0),t=l.querySelector("g#mainSVGViewPort");t.removeAttribute("transform"),t.removeAttribute("style");let a=t.querySelector("g#mainSVGContainer");a.removeChild(a.querySelector("desc")),a.removeChild(a.querySelector("defs"));let r=a.firstElementChild;r.style.stroke="none",r.style.strokeWidth="";var i=(e,t,a="",r="",i="")=>{e.style.fill=a||e.style.fill||e.getAttribute("fill"),e.style.stroke=r||e.style.stroke||e.getAttribute("stroke"),e.style.strokeWidth=i||e.style.strokeWidth||e.getAttribute("stroke-width");window.devicePixelRatio,l.clientWidth||parseInt(getComputedStyle(l).width),l.clientHeight||parseInt(getComputedStyle(l).height);if(l.removeAttribute("xmlns:xlink"),"svg"===t&&(e=function(e){e=(new XMLSerializer).serializeToString(e);return"data:image/svg+xml,"+encodeURIComponent(e)}(l),s.setAttribute("src",e),n.setAttribute("href",e)),"png"===t){let e=l.outerHTML;canvgv2(o,e,{ignoreAnimation:!0,ignoreMouse:!0});t=o.toDataURL("image/png");s.setAttribute("src",t),n.setAttribute("href",t)}};return i(r,e),{$img:s,rectBackground:r,updateBackgroundStyle:i}};return document.querySelector("#share-visualize").addEventListener("click",e=>{const t=new Promise(e=>{e({panelURL:y()})});t.then(e=>{Swal.fire({title:"Share the interactive graph!",icon:"info",iconHtml:'<span class="sweetalert-icon material-icons">share</span>',html:`
                <div id="visualizer-iframe-copy" class="container-copy">
                    <div class="iframe-copier">
                        <div class="iframe-content">
                            <span>${e.panelURL.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</span>
                        </div>
                        <div class="wrap-copy-iframe"><button class="copy-iframe"><i class="far fa-copy"></i></button></div>
                    </div>
                </div>
                <canvas style="display:none; width: 100%; height: unset;" id="export-image"></canvas>
                
                <a class="anchor-export-img" href="" download="graph-regex.png"><img id="exported-img" src=""><span><i class="fas fa-download"></i>SVG</span></a>
                `,showCancelButton:!0,showConfirmButton:!1,showCloseButton:!0,cancelButtonText:"Close",didOpen:()=>{Swal.showLoading(),document.querySelector("#visualizer-iframe-copy button.copy-iframe").addEventListener("click",function(){navigator.clipboard.writeText(e.panelURL),document.querySelector("#visualizer-iframe-copy .copy-iframe>i").className="fas fa-check",document.querySelector("#visualizer-iframe-copy .iframe-copier").classList.add("copied"),setTimeout(function(){var e=document.querySelector("#visualizer-iframe-copy .copy-iframe>i");let t=document.querySelector("#visualizer-iframe-copy .iframe-copier");e&&t&&t.classList.remove("copied")},1e3)});var{}=w(document.querySelector("canvas#export-image"),document.querySelector("img#exported-img"),document.querySelector("img#exported-img").parentElement,imageType="svg");Swal.hideLoading()}})})}),n?(()=>{var e=r.re,e=i(e,language_selected=r.reLang);if(e){h.classList.add("loading");v.updateProgressBar=function(e){this.attributes.getNamedItem("data-value").value=`${e}`,this.style.transform=`scaleX(${e/100})`};RegexVisualizer(e,c(),f,v);return[m,g,p]=CustomThumbnailSVGControl({mainViewId:"visualizer-graphView",mainSVGId:"visualizer-graphSVG",thumbContainerId:"thumbViewContainer"}),h.classList.remove("loading"),v.attributes.getNamedItem("data-value").value="0",v.style.transform=""}})():(s.addEventListener("click",e=>{e.detail&&1!=e.detail||a()}),t.addEventListener("click",e=>{Swal.fire({title:"Share the Image Graph (PNG)!",icon:"info",iconHtml:'<span class="sweetalert-icon material-icons">share</span>',html:`
                <canvas style="display:none; width: 100%; height: unset;" id="export-image"></canvas>
                
                <a class="anchor-export-img" href="" download="graph-regex.png"><img id="exported-img" src=""><span><i class="fas fa-download"></i>PNG</span></a>
                `,showCancelButton:!0,showConfirmButton:!1,showCloseButton:!0,cancelButtonText:"Close",didOpen:()=>{Swal.showLoading();var{}=w(document.querySelector("canvas#export-image"),document.querySelector("img#exported-img"),document.querySelector("img#exported-img").parentElement,imageType="png");Swal.hideLoading()}})}),a()),{generatePanelURL:y}};
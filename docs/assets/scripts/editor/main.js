var EditorParser=e=>{const n=e.noneditor||!1,t=e.debug||!1;var o,a,c,l,i,s,d,u,g,m,f=document.querySelector("#input"),p={re:"",reLang:"",flags:""};n?(I=T(),p={re:I.re,reLang:I.reLang,flags:I.flags}):(o=document.querySelector("#editor-terminal").querySelector("#terminal-stats"),a=document.querySelector("#real-time-check"),c=document.querySelector("#terminal-error"),l=c.querySelector("#errorDef"),i=c.querySelector("#errorBox"),s=document.getElementsByName("flag"),d=document.querySelector("#iframeIt"),u=document.querySelector("#visualizeClick"),g=e.raphaelJSONId||"raphael-json",m=e.regexSONId||"regex-json");function h(e,r){e.innerHTML="";var t=document.createTextNode("");return t.nodeValue=r,e.appendChild(t),r}var y=document.querySelector(`#${e.loader_view_id}`),x=function(e,r){e=`${e.length}`,r=`${r.groupCount}`;h(o.querySelector("#re-len .stat-value"),e),h(o.querySelector("#re-groups .stat-value"),r)},v=function(){h(i,""),h(l,"Correct syntax"),c.classList.add("correct-syntax")},w=function(e,r){c.classList.remove("correct-syntax");(async()=>{const e=Swal.mixin({toast:!0,position:"top-right",iconColor:"white",customClass:{popup:"colored-toast"},showConfirmButton:!1,timer:1500,timerProgressBar:!0});await e.fire({icon:"error",title:"Error: See the editor console error!"})})(),c.style.display="block";var t=[],o=[];"number"==typeof r.lastIndex&&t.push(` ${e}`),o.push("Error:"+r.message),o.push(""),i.style.setProperty("--position-error-ch",`${r.lastIndex+1}ch`);e=0,e=i.scrollLeft;h(i,t.join("\n")),h(l,o.join("\n")),i.scrollLeft=e;i.scrollWidth,i.clientWidth;r=i.scrollWidth/i.textContent.length*(r.lastIndex+1)-i.clientWidth/2;i.scrollLeft=r};function S(e,r){t&&window.hasOwnProperty("JsonView")&&(e.innerHTML="",window.setTimeout(()=>JsonView.renderJSON(r,e),50))}const b=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");const L=e=>{e={raw:e.raw.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),groupCount:e.groupCount,tree:e.tree};var r=document.querySelector(`#${m}`);S(r,e)},$=r=>{v();var e=null;try{var t=RegexParser(),o=O(),e=t(r,null,o);x(r,e),p={re:r,reLang:o,flags:R()}}catch(e){if(!(e instanceof t.RegexSyntaxError))throw e;w(r,e)}return e&&L(e),e};function r(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}const C=()=>p.re,q=()=>f.value;function k(e){f.value=e}const R=function(){for(var e="",r=0,t=s.length;r<t;r++)s[r].checked&&(e+=s[r].value);return e},B=()=>p.flags;var I=function(e){for(var r=0;r<s.length;r++)~e.indexOf(s[r].value)?s[r].checked=!0:s[r].checked=!1};const O=()=>document.querySelector("[name='languageRegex']:checked").value,E=()=>p.reLang;e=function(e){document.querySelector(`[value="${e}"]`).checked=!0};function T(){var e=location.hash;return!e||e.length<2?e={reLang:"python",embed:!1,re:"",highlight:!0,flags:""}:((e=(e=e.slice(2)).split("&").reduce(function(e,r){var t=r.substring(r.indexOf("=")+1);return e[r.substring(0,r.indexOf("="))]=t,e},{})).raLang=e.reLang,e.embed="true"===e.embed,e.flags=e.flags||"",e.re=e.re?r(decodeURIComponent(e.re)):""),e}var N;return n||(function(){let r=null;f.addEventListener("input",function(e){r&&clearTimeout(r),a.checked&&(r=setTimeout(()=>{$(q())},500)),window.hasChanges=!0,u.disabled=!1}),d.addEventListener("click",function(){if(!$(q()))return!1;var e=(r=location.href).indexOf("#"),r=0<e?r.slice(0,e):r,e=C();const t=`
            <iframe frameborder="0" width="500px" height="300px"
            src="${r}#!embed=true&flags=${R()}&re=${encodeURIComponent(e)}">
            </iframe>`;e=b(t);Swal.fire({title:"Share your visual regex",html:`
                <div id="beyond-regex-iframe-copy" class="container-copy">
                    <div class="iframe-copier">
                        <div class="iframe-content">
                            <span>${e}</span>
                        </div>
                        <div class="wrap-copy-iframe"><button class="copy-iframe"><i class="far fa-copy"></i></button></div>
                    </div>
                </div>
                `,icon:"info",iconHtml:'<span class="sweetalert-icon material-icons">share</span>',showCancelButton:!0,showConfirmButton:!1,showCloseButton:!0,cancelButtonText:"Close",didOpen:()=>{Swal.showLoading(),document.querySelector("#beyond-regex-iframe-copy button.copy-iframe").addEventListener("click",function(){navigator.clipboard.writeText(t),document.querySelector("#beyond-regex-iframe-copy .copy-iframe>i").className="fas fa-check",document.querySelector("#beyond-regex-iframe-copy .iframe-copier").classList.add("copied"),setTimeout(function(){var e=document.querySelector("#beyond-regex-iframe-copy .copy-iframe>i");let r=document.querySelector("#beyond-regex-iframe-copy .iframe-copier");e&&r&&r.classList.remove("copied")},1e3)}),Swal.hideLoading()}})}),i.addEventListener("scroll",e=>{f.scrollLeft=e.currentTarget.scrollLeft});let e=document.querySelectorAll("[name='languageRegex']");for(var t=0,o=e.length;t<o;t++)e[t].onclick=function(){y.classList.contains("loading")||u.disabled&&(u.disabled=!1)}}(),!(N=T()).embed&&"export"!=N.cmd||(document.body.className+=" embed"),N.flags?I(N.flags):I("g"),N.re?k(N.re):k("^BEYOND ReGex(?P<TOOLS>builder|[bv]isualize|(?=de)bugger) Born to be a RegEx editor$"),N.reLang?e(N.reLang):e("python")),{parseSharedRegex:(r,e="python")=>{var t=null;try{var o=RegexParser(),t=o(r,null,e)}catch(e){if(!(e instanceof o.RegexSyntaxError))throw e;n&&((e,r)=>{let t="";var o,n,a;"number"==typeof r.lastIndex&&(o=b(e.slice(0,r.lastIndex)),n=b(e[r.lastIndex]),a=b(e.slice(r.lastIndex+1)),e=`${location.origin}/beyond-regex/`,editLink=`${e}#!flags=${B()}&re=${encodeURIComponent(C())}&reLang=${E()}"`,t=`
                <p style="text-align: left;">Regex Flags: <strong>${B()}</strong></p>        
                <p style="text-align: left;">Regex Language syntax: <strong>${E()}</strong></p>    
                <p style="text-align:left; margin-top: 1em">${r.message}</p>
                <div style="overflow-x: auto; overflow-y: hidden; white-space: nowrap; margin-top: 1em;">${o}<strong style="
                    color: red;
                    text-decoration: underline 1px wavy;">${n}</strong>${a}</div>
            `),Swal.fire({title:"Shared regex is wrong",icon:"error",html:`
            <style>
            a.cool-anchor {
                color: white;
                height: 1em;
                display: block;
                margin-top: 1em;
                padding: 0.5em;
                border-radius: 0.5em;
                text-decoration: none;
                line-height: 1;
                background: linear-gradient(45deg, #03a9f4, #ff0058);
            }
            </style>
            ${t}<a target="_black" class="cool-anchor" href="${editLink}">Correct with the editor!</a>
            `,showCancelButton:!0,showConfirmButton:!1,showCloseButton:!0,cancelButtonText:"Close"})})(r,e)}return t},trim:r,getParams:T,parseRegex:$,getCorrectedFlags:B,getCorrectedReLanguage:E,getCorrectedRegex:C,_updateRaphaelItemsJSON:e=>{var r=document.querySelector(`#${g}`);S(r,e)}}};
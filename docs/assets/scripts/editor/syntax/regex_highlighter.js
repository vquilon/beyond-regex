function RegexHighlighter(e,l){let i=void 0;const s=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");function c(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ |&nbsp;/g,'<span class="space special-chars"> </span>').replace(/\n/g,`<span class="endline special-chars">
</span>`).replace(/\t/g,`<span class="tab special-chars">	</span>`)}const o=(e,a,{extraClass:t="",extraAttributes:r="",closeTag:n=!0})=>{let s=[e.type],p=(""!==t&&s.push(t),`<span class="${s.join(" ")}" tokenId="${e.id}" tokenIndices="${e.indices.join(",")}" ${r}>`+a);return n&&(p+="</span>"),p},u=(a,e,t)=>{if(quant="",a.repeat)if(a.commentRepeatId){let e=t.filter(e=>e.id===a.commentRepeatId)[0];e.repeatComment=a.repeat.raw,e.repeatTokenId=a.id}else quant=`<i greedy="${!a.repeat.nonGreedy}">${a.repeat.raw}</i>`;return quant};var a=(e,a,t)=>{let r=c(e.raw);return e.repeat&&(t=u(e,0,t),r=c(e.raw.slice(0,e.repeat.beginIndex)),r+=t),o(e,r,{})},t=(e,a,t)=>{let r=c(e.raw);return e.repeat&&(t=u(e,0,t),r=c(e.raw.slice(0,e.repeat.beginIndex)),r+=t),o(e,r,{extraAttributes:`chars="${e.chars}"`})};const n={assert:(t,e,a)=>{var r={AssertBegin:[t.raw,""],AssertLookahead:['<span class="parenthesis">(</span>?=','<span class="parenthesis">)</span>'],AssertNegativeLookahead:['<span class="parenthesis">(</span>?!','<span class="parenthesis">)</span>'],AssertNonWordBoundary:["\\B",""],AssertWordBoundary:["\\b",""],AssertEnd:[t.raw,""]};let n="",s=("sub"in t&&t.sub.forEach((e,a)=>{n+=h(e,a,t.sub)}),""+r[t.assertionType][0]+n);return t.raw.slice(t.endParenIndex-t.indices[0]).startsWith(")")&&(s+=r[t.assertionType][1]),s+=u(t,0,a),o(t,s,{extraClass:t.assertionType})},backref:a,charset:(e,a,t)=>{let r=c(e.raw);return e.repeat&&(t=u(e,0,t),r=c(e.raw.slice(0,e.repeat.beginIndex)),r+=t),o(e,r,{})},choice:(e,a,t)=>{let n="";e.branches.forEach((t,e,a)=>{let r="";t.forEach((e,a)=>{r+=h(e,a,t)}),n+=`<span class="branch">${r}</span>`,e!==a.length-1&&(n+='<span class="or">|</span>')}),e.repeat&&(t=u(e,0,t),n+=t);t=o(e,n,{});return t},dot:(e,a,t)=>{let r="";return e.repeat&&(r=u(e,0,t)),o(e,"."+r,{extraClass:"dot"})},empty:a,exact:a,group:(t,e,a)=>{let r="";t.sub.forEach((e,a)=>{r+=h(e,a,t.sub)});var n=`non-capture="${t.nonCapture||"false"}" group-number="${t.num||""}" group-name="${t.name||""}"`;let s=t.nonCapture?"?:":"";var p={"(?P":`?P<${t.name}>`,"(?<":`?<${t.name}>`,"(?'":`?'${t.name}'`};t.raw.slice(0,3)in p&&(s=c(s=t.name?p[t.raw.slice(0,3)]:""));let l='<span class="parenthesis">)</span>',i=(t.raw.slice(t.endParenIndex-t.indices[0]).startsWith(")")||(l=""),'<span class="parenthesis">(</span>'+s+r+l);return t.repeat&&(p=u(t,0,a),i+=p),o(t,i,{extraAttributes:n})},hexadecimal:t,unicode:t,octal:t,comment:(e,a,t)=>{var r;let n='<span class="parenthesis">)</span>',s=(e.errors&&e.errors.some(e=>"UnterminatedGroup"===e.type)&&(n=""),0),p=(e.repeatComment&&(s=e.repeatComment.length),e.raw.substr(0,e.raw.length-s).endsWith(")")||(n=""),'<span class="parenthesis">(</span>?#'+e.comment+n);return e.repeatComment&&(r=`<i data-repeattokenid="${e.repeatTokenId}">${e.repeatComment}</i>`,p+=r),o(e,p,{})},unexpected:a},h=(e,a,t)=>{let r="";return e.type in n&&(r+=n[e.type](e,a,t)),r},d=(t,e)=>{let r="",a=(void 0===t?r=`<span>${s(e)}</span>`:t.tree.forEach((e,a)=>{r+=h(e,a,t.tree)}),document.createElement("div"));var n;return a.innerHTML=r,r=a.innerText!==e?a.innerText.length<e.length&&e.startsWith(a.innerText)?(n=e.slice(a.innerText.length),`<span>${r}</span><span>${c(n)}</span>`):`<span>${c(e)}</span>`:r};return{onInput:(e,a,{target:t})=>{var r,n,s,p;"TEXTAREA"===t.nodeName?i===t.value?i=t.value:(r=d(e,t.value),s=(t=t).getAttribute("data-min-rows"),t._baseScrollHeight||(n=(p=t).value,p.value="",p._baseScrollHeight=p.scrollHeight,p._baseHeight=p.getBoundingClientRect().height,p.value=n),t.rows=s,p=Math.round(t.scrollHeight/t._baseScrollHeight),t.rows=s<=p?p:s):i===a?i=a:r=d(e,a),l.innerHTML=r}}}
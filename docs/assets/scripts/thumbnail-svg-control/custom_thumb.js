var CustomThumbnailSVGControl=function(m){const d="mainSVGContainer";var h={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null};void 0===m.thumbnailViewport&&(m.thumbnailViewport=h);var p,v=!0,g={pan:!0,zoom:!0},S=document.getElementById(m.mainViewId),f=document.getElementById(m.mainSVGId),w=document.getElementById(m.thumbSVGId);const C="control-panel";var b,L,y,E,x,i=!1;m.thumbContainerId;let r={pan:{x:0,y:0},zoom:0};var o=[],l=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(e,t,n){null==n&&(n=!1),this._addEventListener_original=l,this._addEventListener_original(e,t,n),this.eventListenerList||(this.eventListenerList={},o.push(this)),this.eventListenerList[e]||(this.eventListenerList[e]=[]),this.eventListenerList[e].push({listener:t,options:n})};var a,s,c,u,z,A,P,N=EventTarget.prototype.removeEventListener;function V(e,t,n){let o=document.createElement(t);return o.id=n,o.appendChild(e),o}function Z(e,t,n,o){return n*(e/o)+t}function F(t,n,o,i){var r=1e3/t,l=0,a=null,s=1/t;function c(e){l+=s,null===a&&(a=e);Math.floor((e-a)/r);l<n?(o(this,l),this.requestAnimationRef=requestAnimationFrame(c)):(cancelAnimationFrame(this.requestAnimationRef),this.requestAnimationRef=void 0,i&&i())}this.requestAnimationRef=void 0,this.isPlaying=!1,this.frameRate=function(e){if(!arguments.length)return t;r=1e3/(t=e),s=1/t,a=null},this.start=function(){this.isPlaying||(this.isPlaying=!0,this.requestAnimationRef=requestAnimationFrame(c))},this.stop=function(){this.isPlaying&&(cancelAnimationFrame(this.requestAnimationRef),this.isPlaying=!1,a=null,l=0,0)}}function M(n,o,i,e,t=void 0){if(g.pan){if(0===i)return n.panFPScontrol&&n.panFPScontrol.stop(),n.pan(o),void(t&&t());n.panFPScontrol&&n.panFPScontrol.stop(),i=i||.5,e=e||60;var r=n.getPan(),l=n.getPan();n.panFPScontrol=new F(e,i,(e,t)=>{l.x=Z(t,r.x,o.x-r.x,i),l.y=Z(t,r.y,o.y-r.y,i),n.pan(l)},t),n.panFPScontrol.start()}else n.pan(o),t&&t()}function $(n,o,i,e,t=void 0){if(g.zoom){if(n.zoomFPScontrol&&n.zoomFPScontrol.stop(),0===i)return n.zoom(o),void(t&&t());i=i||.5,e=e||60;var r=n.getZoom(),l=r;n.zoomFPScontrol=new F(e,i,(e,t)=>{l=Z(t,r,o-r,i),Math.abs(o-r)<.001?(l=o,n.zoom(l),e.stop()):n.zoom(l)},t),n.zoomFPScontrol.start()}else n.zoom(o),t&&t()}EventTarget.prototype.removeEventListener=function(t,e,n){null==n&&(n=!1),this._removeEventListener_original=N,this._removeEventListener_original(t,e,n),this.eventListenerList||(this.eventListenerList={}),this.eventListenerList[t]||(this.eventListenerList[t]=[]);for(let e=0;e<this.eventListenerList[t].length;e++)if(this.eventListenerList[t][e].listener,this.eventListenerList[t][e].options==n){this.eventListenerList[t].splice(e,1);break}0==this.eventListenerList[t].length&&(delete this.eventListenerList[t],o.splice(o.indexOf(this),1))},EventTarget.prototype.removeAllEventListener=function(){Object.keys(this.eventListenerList).forEach(e=>{for(;0<this.eventListenerList[e].length;){var t=this.eventListenerList[e][0].listener,n=this.eventListenerList[e][0].options;if(this.removeEventListener(e,t,n),!(e in this.eventListenerList))break}})};function T(e){var t=e.contentDocument;return t||"function"==typeof e.getSVGDocument&&(t=e.getSVGDocument()),t}var B=function(e){let t="http://www.w3.org/2000/svg",n="http://www.w3.org/2000/xmlns/",o="http://www.w3.org/1999/xlink",i="http://www.w3.org/2001/xml-events";var r;e.setAttribute("xmlns",t),e.setAttributeNS(n,"xmlns:xlink",o),e.setAttributeNS(n,"xmlns:ev",i),null===e.parentNode||-1===(r=e.getAttribute("style")||"").toLowerCase().indexOf("overflow")&&e.setAttribute("style","overflow: hidden; "+r)},k=function(e){if(e.clientWidth&&e.clientHeight)return{width:e.clientWidth,height:e.clientHeight};if(e.getBoundingClientRect())return e.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},R=function(e,t,n){if((o=null)||1===(i=Array.prototype.slice.call(e.childNodes||e.children).filter(function(e){return"defs"!==e.nodeName&&"#text"!==e.nodeName})).length&&"g"===i[0].nodeName&&null===i[0].getAttribute("transform")&&(o=i[0]),!o){var o,i="viewport-"+(new Date).toISOString().replace(/\D/g,"");(o=document.createElementNS(n,"g")).setAttribute("id",i);var r=e.childNodes||e.children;if(r&&0<r.length)for(var l=r.length;0<l;l--)"defs"!==r[r.length-l].nodeName&&o.appendChild(r[r.length-l]);e.appendChild(o)}e=[];return~(e=o.getAttribute("class")?o.getAttribute("class").split(" "):e).indexOf("svg-pan-zoom_viewport")||(e.push("svg-pan-zoom_viewport"),o.setAttribute("class",e.join(" "))),o};E=function(){var e=T(f);m.onMainViewSVGLoaded&&m.onMainViewSVGLoaded(e);let t=document.createElementNS("http://www.w3.org/2000/svg","g"),n=document.createElementNS("http://www.w3.org/2000/svg","g");t.id=d,n.id="mainSVGViewPort";let o=[...f.childNodes];return o.forEach(function(e){t.appendChild(e)}),n.appendChild(t),f.appendChild(n),svgPanZoom("#"+m.mainSVGId,{zoomEnabled:!0,controlIconsEnabled:!1,fit:!0,center:!0,beforeZoom:function(e,t){return v=!0},preventMouseEventsDefault:!0,minZoom:.8,maxZoom:1/0,mouseWheelZoomEnabled:!1,zoomScaleSensitivity:.2,customEventsHandler:{haltEventListeners:["wheel"],init:function(e){var t="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";P=function(t){let n=E;if(n.isZoomEnabled()){t.preventDefault();var o=t.deltaY||1,i=Date.now()-n.lastMouseWheelEventTime,r=3+Math.max(0,30-i);n.lastMouseWheelEventTime=Date.now();var l,a,o=-.3<(o="deltaMode"in t&&0===t.deltaMode&&t.wheelDelta?0===t.deltaY?0:Math.abs(t.wheelDelta)/t.deltaY:o)&&o<.3?o:(0<o?1:-1)*Math.log(Math.abs(o)+10)/r,s=f.getScreenCTM().inverse(),c=f.createSVGPoint(),u=(p.getBoundingClientRect(),E.getSizes().realZoom,x.getSizes().width,x.getSizes().height,x.getSizes().realZoom,f.getBoundingClientRect());let e={x:u.x+u.width/2,y:u.y+u.height/2};this===f?(c.x=t.clientX,c.y=t.clientY,e=c.matrixTransform(s)):this===b&&(l=t.clientX,a=t.clientY,i=document.querySelector("#scope").getBoundingClientRect(),r=u.width/i.width,t=u.height/i.height,c.x=u.x-(i.x-l)*r,c.y=u.y-(i.y-a)*t,e=c.matrixTransform(s));o=Math.pow(1+n.zoomScaleSensitivity,-1*o);E.zoomFPScontrol&&E.zoomFPScontrol.stop(),function(n,e,o,i,t,r=void 0){if(g.zoom){if(n.zoomFPScontrol&&n.zoomFPScontrol.stop(),0===i)return n.zoomAtPoint(n.getZoom()*e,o),r&&r();i=i||.5,t=t||60;var l,a=n.getZoom(),s=a*e;n.zoomFPScontrol=new F(t,i,(e,t)=>{l=Z(t,a,s-a,i),n.zoomAtPoint(l,o)},r),n.zoomFPScontrol.start()}else n.zoomAtPointBy(e,o),r&&r()}(n,o,e,animationDuration=0)}},f.eventListenerList=[],S.eventListenerList=[],e.svgElement.eventListenerList=[],e.svgElement.addEventListener(t,P)},destroy:function(e){E.zoomFPScontrol&&E.zoomFPScontrol.stop(),E.panFPScontrol&&E.panFPScontrol.stop(),e.svgElement.removeAllEventListener(),S.removeAllEventListener(),I.unobserve(S),f.removeAllEventListener();let t=document.querySelector("#zoom-in"),n=document.querySelector("#zoom-out"),o=document.querySelector("#zoom-reset");t.removeEventListener("click",c),n.removeEventListener("click",s),o.removeEventListener("click",a)}}})}(),function(){b=document.getElementById(m.thumbContainerId);var u="http://www.w3.org/2000/svg",e=document.createElementNS(u,"rect");e.id="scope",e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"height","0"),e.setAttributeNS(null,"width","0"),e.setAttributeNS(null,"fill","#ff00ff"),e.setAttributeNS(null,"fill-opacity","0.4"),e.setAttributeNS(null,"stroke","none");var t=document.createElementNS(u,"line");t.id="line1",t.setAttributeNS(null,"stroke","none"),t.setAttributeNS(null,"x1","0"),t.setAttributeNS(null,"y1","0"),t.setAttributeNS(null,"x2","0"),t.setAttributeNS(null,"y2","0");var n=document.createElementNS(u,"line");n.id="line2",n.setAttributeNS(null,"stroke","none"),n.setAttributeNS(null,"x1","0"),n.setAttributeNS(null,"y1","0"),n.setAttributeNS(null,"x2","0"),n.setAttributeNS(null,"y2","0");var o=document.createElementNS(u,"g");o.appendChild(e),o.appendChild(t),o.appendChild(n);t=document.createElementNS(u,"svg");t.id="scopeContainer",t.classList.add("thumbViewClass"),t.appendChild(o),w=document.createElementNS(u,"svg");let i=document.createElementNS(u,"use");i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",`#${d}`);let r=document.createElementNS(u,"g");r.id="thumbnail-viewport";let l=m.thumbnailViewport.viewportSelector||h;r.classList.add(l.slice(1)),r.appendChild(i),w.style="",w.id="thumbSVG",w.appendChild(r);n=V(w,newWrapType="div",newWrapId="thumbView");n.classList.add("thumbViewClass");let a=document.createElement("div");a.id="masked",b?(b.appendChild(a),b.appendChild(t)):(b=V(a,newWrapType="div",newWrapId="thumbViewContainer")).appendChild(t),b.appendChild(n);let s=document.createElement("div");s.classList.add("control-zoom");o=function(e,t){let n=document.createElementNS(u,"svg"),o=document.createElementNS(u,"g");n.classList.add("lens"),o.classList.add("main");let i=document.createElementNS(u,"circle"),r=document.createElementNS(u,"clipPath"),l=document.createElementNS(u,"g");i.setAttributeNS(null,"r","100%"),i.setAttributeNS(null,"cx","50%"),i.setAttributeNS(null,"cy","50%"),i.setAttributeNS(null,"style",`clip-path: url(#clip-${t});opacity: 0.6; fill: black;`),r.id=`clip-${t}`,l.classList.add("gradient");let a=document.createElement("div");a.id=t,a.classList.add("icon");let s=document.createElementNS(u,"path");s.setAttributeNS(null,"d",e);let c=document.createElementNS(u,"path");return c.setAttributeNS(null,"d",e),c.style.transform="translate(-35%, -35%) scale(0.06)",c.style.transformOrigin="center",r.appendChild(c),l.appendChild(s),o.appendChild(l),o.style.transform="translate(-35%, -35%) scale(0.06)",o.style.transformOrigin="center",n.appendChild(i),n.appendChild(r),n.appendChild(o),a.appendChild(n),a},t=o("M 420.67 210.335 C 420.67 257.269 405.298 300.613 379.313 335.606 L 502.948 459.241 C 515.017 471.31 515.017 490.879 502.948 502.948 C 490.879 515.017 471.31 515.017 459.241 502.948 L 335.606 379.313 C 300.613 405.298 257.269 420.67 210.335 420.67 C 94.17 420.67 0 326.5 0 210.335 C 0 94.17 94.17 0 210.335 0 C 326.5 0 420.67 94.17 420.67 210.335 Z M 323.979 185.927 L 239.965 185.927 C 237.236 185.927 235.022 183.715 235.022 180.986 L 235.022 96.971 C 235.022 83.325 223.959 72.261 210.312 72.261 C 196.666 72.261 185.602 83.325 185.602 96.971 L 185.602 180.986 C 185.602 183.715 183.39 185.927 180.661 185.927 L 96.646 185.927 C 83 185.927 71.936 196.991 71.936 210.637 C 71.936 224.284 83 235.349 96.646 235.349 L 180.661 235.349 C 183.39 235.349 185.602 237.561 185.602 240.29 L 185.602 324.305 C 185.602 337.951 196.666 349.015 210.312 349.015 C 223.959 349.015 235.022 337.951 235.022 324.305 L 235.022 240.29 C 235.022 237.561 237.236 235.349 239.965 235.349 L 323.979 235.349 C 337.625 235.349 348.69 224.284 348.69 210.637 C 348.69 196.991 337.625 185.927 323.979 185.927 Z","zoom-in"),n=o("M 420.67 210.335 C 420.67 257.269 405.298 300.613 379.313 335.606 L 502.948 459.241 C 515.017 471.31 515.017 490.879 502.948 502.948 C 490.879 515.017 471.31 515.017 459.241 502.948 L 335.606 379.313 C 300.613 405.298 257.269 420.67 210.335 420.67 C 94.17 420.67 0 326.5 0 210.335 C 0 94.17 94.17 0 210.335 0 C 326.5 0 420.67 94.17 420.67 210.335 Z M 323.979 185.927 L 96.646 185.927 C 83 185.927 71.936 196.991 71.936 210.637 C 71.936 224.284 83 235.349 96.646 235.349 L 323.979 235.349 C 337.625 235.349 348.69 224.284 348.69 210.637 C 348.69 196.991 337.625 185.927 323.979 185.927 Z","zoom-out"),o=o("M 420.67 210.335 C 420.67 257.269 405.298 300.613 379.313 335.606 L 502.948 459.241 C 515.017 471.31 515.017 490.879 502.948 502.948 C 490.879 515.017 471.31 515.017 459.241 502.948 L 335.606 379.313 C 300.613 405.298 257.269 420.67 210.335 420.67 C 94.17 420.67 0 326.5 0 210.335 C 0 94.17 94.17 0 210.335 0 C 326.5 0 420.67 94.17 420.67 210.335 Z M 348.273 94.961 C 338.364 94.961 330.333 102.994 330.333 112.902 L 330.333 141.72 C 319.644 123.116 304.763 107.22 286.708 95.246 C 264.036 80.21 237.619 72.261 210.313 72.261 C 191.639 72.261 173.515 75.923 156.445 83.144 C 139.964 90.114 125.167 100.088 112.465 112.791 C 99.763 125.494 89.788 140.291 82.817 156.77 C 75.597 173.842 71.936 191.966 71.936 210.638 C 71.936 229.311 75.597 247.435 82.817 264.506 C 89.788 280.987 99.764 295.783 112.465 308.485 C 125.168 321.188 139.965 331.163 156.445 338.134 C 173.515 345.354 191.64 349.015 210.313 349.015 C 226.259 349.015 241.899 346.322 256.798 341.009 C 271.197 335.874 284.579 328.416 296.574 318.845 C 308.449 309.366 318.628 298.085 326.828 285.314 C 335.181 272.303 341.246 258.105 344.853 243.113 C 347.171 233.48 341.242 223.791 331.608 221.473 C 321.973 219.155 312.285 225.085 309.967 234.719 C 304.682 256.689 291.976 276.605 274.19 290.799 C 265.306 297.891 255.399 303.413 244.747 307.211 C 233.726 311.141 222.141 313.134 210.313 313.134 C 182.936 313.134 157.196 302.472 137.838 283.113 C 118.479 263.754 107.817 238.015 107.817 210.637 C 107.817 183.261 118.479 157.521 137.838 138.163 C 157.197 118.804 182.936 108.142 210.313 108.142 C 230.542 108.142 250.102 114.022 266.876 125.148 C 281.332 134.735 293.04 147.704 301.051 162.925 L 281.223 162.925 C 271.314 162.925 263.282 170.957 263.282 180.865 C 263.282 190.774 271.314 198.806 281.223 198.806 L 348.273 198.806 C 358.182 198.806 366.214 190.774 366.214 180.865 L 366.214 112.902 C 366.214 102.994 358.182 94.961 348.273 94.961 Z","zoom-reset");s.appendChild(t),s.appendChild(n),s.appendChild(o);let c=document.createElement("div");c.classList.add(C),c.appendChild(b),c.appendChild(s),o=c,S.parentNode.insertBefore(o,S.nextSibling),function(e){B(e);var t=k(e),n=t.width,o=t.height,t=m.thumbnailViewport.viewportSelector||h;let i=R(e,t);new ShadowViewport(i,{svg:e,width:n,height:o,fit:m.thumbnailViewport.fit||h.fit,contain:m.thumbnailViewport.contain||h.contain,center:m.thumbnailViewport.center||h.fit,refreshRate:m.thumbnailViewport.refreshRate||h.fit,beforeZoom:function(e,t){if(i&&m.thumbnailViewport.beforeZoom)return m.thumbnailViewport.beforeZoom(e,t)},onZoom:function(e){if(i&&m.thumbnailViewport.onZoom)return m.thumbnailViewport.onZoom(e)},beforePan:function(e,t){if(i&&m.thumbnailViewport.beforePan)return m.thumbnailViewport.beforePan(e,t)},onPan:function(e){if(i&&m.thumbnailViewport.onPan)return m.thumbnailViewport.onPan(e)},onUpdatedCTM:function(e){if(i&&m.thumbnailViewport.onUpdatedCTM)return m.thumbnailViewport.onUpdatedCTM(e)}})}(w)}(),x=function(){var e=T(w);m.onThumbnailSVGLoaded&&m.onThumbnailSVGLoaded(e);e=svgPanZoom(`#${w.id}`,{zoomEnabled:!0,panEnabled:!0,controlIconsEnabled:!1,dblClickZoomEnabled:!1,preventMouseEventsDefault:!1,customEventsHandler:{init:function(e){var t="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";w.eventListenerList=[],b.eventListenerList=[],b.addEventListener(t,P)},destroy:function(e){x.zoomFPScontrol&&x.zoomFPScontrol.stop(),x.panFPScontrol&&x.panFPScontrol.stop(),w.removeAllEventListener(),b.removeAllEventListener(),p.removeAllEventListener()}}});return p=document.getElementById("scopeContainer"),e}(),function(e,t){if(!x&&t&&(x=t),(E=!E&&e?e:E)&&x){E.setOnZoom(function(e){x.updateThumbScope()}),E.setOnPan(function(e){x.updateThumbScope()}),E.setZoomScaleSensitivityAux=function(e){E.zoomScaleSensitivity=e,E.setZoomScaleSensitivity(e)};x.updateThumbScope=function(){var e,t,n,o,i,r,l=document.getElementById("scope"),a=document.getElementById("line1"),s=document.getElementById("line2");m=x,t=l,n=a,c=s,o=(e=E).getPan().x,i=e.getPan().y,r=e.getSizes().width,l=e.getSizes().height,a=e.getSizes().realZoom,s=m.getPan().x,e=m.getPan().y,a=m.getSizes().realZoom/a,o=s-o*a,i=e-i*a,r*=a,a*=l,t.setAttribute("x",o),t.setAttribute("y",i),t.setAttribute("width",r),t.setAttribute("height",a),n.setAttribute("x1",1+o),n.setAttribute("y1",1+i),n.setAttribute("x2",1+o+r-2),n.setAttribute("y2",1+i+a-2),c.setAttribute("x1",1+o),c.setAttribute("y1",1+i+a-2),c.setAttribute("x2",1+o+r-2),c.setAttribute("y2",1+i),v&&(a=(n=document.querySelector("#scope").getBoundingClientRect()).x+n.width/2,r=n.y+n.height/2,c=p.getBoundingClientRect(),n=m.getSizes().width,m=m.getSizes().height,L=o-(s+(a-c.left-n/2)),y=i-(e+(r-c.top-m/2)),v=!1);var c=document.querySelector("#scope").getBBox();let u=document.querySelector("#masked");c.x,c.y,c.width,c.height,c.x,c.y,c.width,c.height;var m="linear-gradient(to top,"+` transparent calc(100% - ${c.y}px),`+` white calc(100% - ${c.y}px)`+"),linear-gradient(to bottom,"+` transparent calc(${c.y}px + ${c.height}px),`+` white calc(${c.y}px + ${c.height}px)`+"),linear-gradient(to left,"+` transparent calc(100% - ${c.x}px),`+` white calc(100% - ${c.x}px)`+"),linear-gradient(to right,"+` transparent calc(${c.x}px + ${c.width}px),`+` white calc(${c.x}px + ${c.width}px)`+")",c="polygon(0% 0%, 0% 100%, "+`${c.x}px 100%, `+`${c.x}px ${c.y}px, `+`calc(${c.x}px + ${c.width}px) ${c.y}px, `+`calc(${c.x}px + ${c.width}px) calc(${c.y}px + ${c.height}px), `+`${c.x}px calc(${c.y}px + ${c.height}px), `+`${c.x}px 100%, `+`${c.x}px 100%, `+"100% 100%, 100% 0%)";u.style.clipPath=c,u.style.webkitMask=m,u.style.mask=m},x.updateThumbScope();var o=function(e,t=!1){if(0==e.buttons&&0==e.button||1!=e.buttons)return!1;!function(e,t,n,o,i=!1){var r=p.getBoundingClientRect(),l=(S.getBoundingClientRect(),n.getSizes().width,n.getSizes().height,n.getSizes().realZoom),a=o.getSizes().width,s=o.getSizes().height,c=o.getSizes().realZoom,u=document.querySelector("#scope").getBoundingClientRect(),o=u.x+u.width/2,u=u.y+u.height/2,a=-((e=e||o)-(r.left+a/2-L))*l/c,c=-((t=t||u)-(r.top+s/2-y))*l/c;E.getPan();i?n.panFPScontrol.isPlaying?n.panFPScontrol.stop():n.pan({x:a,y:c}):M(n,{x:a,y:c},animateTime=.1)}(e.clientX,e.clientY,E,x,t)};z=function(e){e.preventDefault(),o(e,move=!(i=!0))},A=function(e){e.preventDefault(),i=!1},u=function(e){e.preventDefault(),i&&o(e,move=!0)},p.addEventListener("mouseup",A),p.addEventListener("mousedown",z),p.addEventListener("mousemove",u),0;let e=document.querySelector("#zoom-in"),t=document.querySelector("#zoom-out"),n=document.querySelector("#zoom-reset");c=function(e){$(E,E.getZoom()+E.zoomScaleSensitivity)},s=function(e){$(E,E.getZoom()-E.zoomScaleSensitivity)},a=function(e){$(E,r.zoom),M(E,r.pan)},e.addEventListener("click",c),t.addEventListener("click",s),n.addEventListener("click",a)}}(E,x),E.setZoomScaleSensitivityAux(.2),m.onMainViewShown&&m.onMainViewShown(mainViewSVGDoc,_main_svg),E.lastMouseWheelEventTime=Date.now(),m.onThumbnailShown&&m.onThumbnailShown(thumbViewSVGDoc,x),$(E,.9*E.getZoom(),animationDuration=.5,fps=60,callback=function(){r.pan=E.getPan(),r.zoom=E.getZoom()}),x.zoomBy(.9),x.updateThumbScope();var D=!0;const I=new ResizeObserver(e=>{for(var t of e){var n=t.target.getBoundingClientRect(),o=p.getBoundingClientRect();0<n.width&&0<n.height&&t.target===S&&(v=!0,D||(D=!1,E.zoomFPScontrol&&E.zoomFPScontrol.stop(),E.panFPScontrol&&E.panFPScontrol.stop(),x.zoomFPScontrol&&x.zoomFPScontrol.stop(),x.panFPScontrol&&x.panFPScontrol.stop()),E.resize(),0<o.width&&0<o.height&&(x.resize(),x.resetZoom(),x.zoomOut(),x.zoomOut(),x.center(!0),x.updateThumbScope()),o={zoom:E.getZoom(),pan:E.getPan()},E.reset(),E.zoomBy(.8),r.pan=E.getPan(),r.zoom=E.getZoom(),E.zoom(o.zoom),E.pan(o.pan))}});return I.observe(S),[E,x,function(){E.destroy(),delete E,x.destroy(),delete x,S.parentElement.getElementsByClassName(C)[0].remove()}]};
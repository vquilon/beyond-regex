<!DOCTYPE html>
<html>
<head>
    {% include head/meta.html %}
    {% include head/base_styles.html %}
    {% include head/building-styles.html %}
    
    {% include editor/debug/styles.html %}
    {% include editor/circle-selector/styles.html %}
    {% include editor/flag-selector/styles.html %}

    {% include mobile/styles.html %}
  
    <!-- VENDORS SCRIPTS -->
    {% include head/base_scripts.html %}
  
    <!-- Scripts para el control de la barra de conexion -->
    {% include offline-status/scripts.html %}
  
    {% include editor/scripts.html %}
    {% include editor/debug/scripts.html %}
  
    <!-- DEFINE / INITIALIZE LISTENERS -->
    <script defer src="{{ site.baseurl }}/assets/scripts/switch_theme.js"></script>
    <script defer src="{{ site.baseurl }}/assets/scripts/menu_listeners.js"></script>
    <script defer>
        window.onbeforeunload = function (e) {
            var areChanges = window.hasChanges || false;
            var areUnsavedData = window.hasUnsavedData || true;
            if (areChanges & areUnsavedData) {
                var confirmationMessage = "You have made changes since you last saved, leaving the website will result in a permanent loss of the data.";
                (e || window.event).returnValue = confirmationMessage; //Gecko + IE
                return confirmationMessage; //Webkit, Safari, Chrome
            }
        }

        window.onload = function () {
            changeDark2LightTheme();
            let [sidebarMove, sidebarUp] = init_menu_listeners();
            document.addEventListener('mousemove', e => {
                sidebarMove(e, touch=false);
            });
            document.addEventListener('touchmove', e => {
                sidebarMove(e, touch=true);
            }, {passive: false});
            document.addEventListener('mouseup', e => {
                sidebarUp(e, touch=false);
            });
            document.addEventListener('touchend', e => {
                sidebarUp(e, touch=true);
            });
            // OFFLINE HANDLER
            offlineHandler();
            let editorParser = EditorParser({
                containerSelector: ".container-editor",
                debug: true,
                regexSONId: "regex-json",
                raphaelJSONId: "raphael-json",
                loader_view_id: "graph-loader",
            });
        }
    </script>
  
    <noscript>
      <h2 id="noscript">Please enable JavaScript in order to use all features</h2>
    </noscript>
  
</head>

<body>
    <script defer>
        document.body.classList.add("js-enabled");
    </script>
    {% include svg-utils/svg-filters.html %}
    <div id="container-main">
        {{ content }}
    </div>
    
    {% include offline-status/connection-box.html %}
</body>

</html>